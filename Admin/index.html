<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BEWISE â€” Admin Dashboard</title>
<style>
  :root{
    --bg:#ffffff; --text:#000000; --muted:#6b7280;
    --green:#10b981; --green-dark:#059669; --card:#f8fafb;
    --shadow: 0 8px 20px rgba(15,23,42,0.06);
  }
  *{box-sizing:border-box;font-family:Inter, system-ui, Arial;}
  body{margin:0;background:var(--bg);color:var(--text)}
  .layout{display:flex;min-height:100vh}
  aside{width:300px;padding:22px;border-right:1px solid #ececec}
  .logo{width:52px;height:52px;border-radius:10px;background:linear-gradient(135deg,var(--green),var(--green-dark));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:900;margin-bottom:12px}
  nav{display:flex;flex-direction:column;gap:8px}
  a.navlink{display:block;padding:10px;border-radius:10px;text-decoration:none;color:var(--text);font-weight:700}
  a.navlink:hover{background:#f3f7f6}
  header{display:flex;justify-content:space-between;align-items:center;padding:18px 22px;border-bottom:1px solid #f0f2f3}
  main{flex:1;padding:22px}
  .metrics{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-bottom:18px}
  .card{background:var(--card);padding:14px;border-radius:12px;box-shadow:var(--shadow)}
  .btn{padding:8px 12px;border-radius:8px;border:0;background:var(--green);color:#fff;font-weight:800;cursor:pointer}
  .btn.ghost{background:transparent;border:2px solid var(--green);color:var(--green)}
  .search{padding:8px 10px;border-radius:8px;border:1px solid #e6e6e6}
  .quick-actions{display:flex;flex-direction:column;gap:8px}
  table{width:100%;border-collapse:collapse}
  th,td{padding:10px;border-bottom:1px solid #eee;text-align:left}
  @media(max-width:900px){aside{display:none}.metrics{grid-template-columns:repeat(2,1fr)}}
</style>
</head>
<body>
<div class="layout">
  <aside>
    <div class="logo">B</div>
    <div style="font-weight:900">BEWISE Admin</div>
    <div style="color:var(--muted);font-size:13px;margin-bottom:12px">Crypto Trading & Fintech</div>
    <nav>
      <a class="navlink" href="index.html">ğŸ  Dashboard</a>
      <a class="navlink" href="fraud.html">ğŸ›¡ï¸ 1 â€” Fraud Detection</a>
      <a class="navlink" href="complaints.html">ğŸ“£ 2 â€” Customer Complaints</a>
      <a class="navlink" href="manual.html">ğŸ’¸ 3 â€” Manual Credit/Debit</a>
      <a class="navlink" href="kyc.html">ğŸªª 4 â€” KYC Verification</a>
      <a class="navlink" href="monitoring.html">ğŸ“Š 5 â€” Monitoring</a>
      <a class="navlink" href="control.html">âš™ï¸ 6 â€” Control Services</a>
      <a class="navlink" href="notifications.html">ğŸ”” 7 â€” Notifications</a>
      <a class="navlink" href="staff.html">ğŸ‘¥ 8 â€” Staff Roles</a>
      <a class="navlink" href="logs.html">ğŸ“œ 9 â€” Logs & Audits</a>
      <a class="navlink" href="scaling.html">ğŸš€ 10 â€” Business Scaling</a>
    </nav>
    <div style="margin-top:18px;color:var(--muted)">Logged in as <strong>Dubem</strong></div>
  </aside>

  <div style="flex:1">
    <header>
      <div>
        <h1 style="margin:0">Admin Dashboard</h1>
        <div style="color:var(--muted);font-size:13px">Overview â€¢ Green primary buttons â€¢ White background â€¢ Black text</div>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <input id="searchBox" class="search" placeholder="Search users, txns, logs..." />
        <button class="btn ghost" onclick="location.href='notifications.html'">Broadcast</button>
      </div>
    </header>

    <main>
      <section class="metrics">
        <div class="card">
          <div style="font-size:12px;color:var(--muted)">Total Volume (24h)</div>
          <div style="font-size:20px;font-weight:900;margin-top:8px" id="vol">â‚¦0.00</div>
        </div>
        <div class="card">
          <div style="font-size:12px;color:var(--muted)">Deposits</div>
          <div style="font-size:20px;font-weight:900;margin-top:8px" id="dep">â‚¦0.00</div>
        </div>
        <div class="card">
          <div style="font-size:12px;color:var(--muted)">Withdrawals</div>
          <div style="font-size:20px;font-weight:900;margin-top:8px" id="wd">â‚¦0.00</div>
        </div>
        <div class="card">
          <div style="font-size:12px;color:var(--muted)">Active Users</div>
          <div style="font-size:20px;font-weight:900;margin-top:8px" id="users">0</div>
        </div>
      </section>

      <section class="card" style="margin-bottom:14px">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <h3 style="margin:0">Recent Transactions</h3>
            <div style="color:var(--muted);font-size:13px">Latest 10</div>
          </div>
          <div style="display:flex;gap:8px">
            <button class="btn" onclick="location.href='manual.html'">Manual Credit/Debit</button>
            <button class="btn ghost" onclick="location.href='./logs.html'">View Logs</button>
          </div>
        </div>
        <div style="margin-top:12px;overflow:auto">
          <table>
            <thead><tr><th>Tx ID</th><th>From</th><th>To</th><th>Amount</th><th>Status</th><th>Date</th></tr></thead>
            <tbody id="txBody">
              <tr><td colspan="6">Loading...</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <section style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px">
        <div class="card">
          <h3 style="margin-top:0">Quick Actions</h3>
          <div class="quick-actions">
            <button class="btn" onclick="location.href='fraud.html'">Freeze Account / Fraud</button>
            <button class="btn" onclick="location.href='complaints.html'">Handle Complaints</button>
            <button class="btn" onclick="location.href='kyc.html'">Review KYC</button>
          </div>
        </div>

        <div class="card">
          <h3 style="margin-top:0">Services</h3>
          <p style="color:var(--muted);margin:0 0 10px 0">APIs & Fees control</p>
          <div style="display:flex;gap:8px">
            <button class="btn ghost" onclick="location.href='control.html'">Service Control</button>
            <button class="btn ghost" onclick="location.href='notifications.html'">Send Announcement</button>
            <button class="btn ghost" onclick="location.href='staff.html'">Manage Staff</button>
          </div>
        </div>

        <div class="card">
          <h3 style="margin-top:0">Compliance</h3>
          <p style="color:var(--muted);margin:0 0 10px 0">KYC, logs & audits</p>
          <div style="display:flex;gap:8px">
            <button class="btn ghost" onclick="location.href='./logs.html'">View Logs</button>
            <button class="btn ghost" onclick="location.href='monitoring.html'">Monitoring</button>
          </div>
        </div>
      </section>
    </main>
  </div>
</div>

<script>
const BACKEND = " https://payme-update.onrender.com "; // <-- replace with your actual backend URL

async function loadMetrics() {
  try {
    const res = await fetch(`${BACKEND}/admin/metrics`);
    const data = await res.json();

    document.getElementById('vol').innerText = `â‚¦${data.total_volume}`;
    document.getElementById('dep').innerText = `â‚¦${data.deposits}`;
    document.getElementById('wd').innerText = `â‚¦${data.withdrawals}`;
    document.getElementById('users').innerText = data.active_users;
  } catch (e) {
    console.error("Metrics load error:", e);
  }
}

async function loadRecentTransactions() {
  try {
    const res = await fetch(`${BACKEND}/admin/recent_tx`);
    const tx = await res.json();

    const txBody = document.getElementById('txBody');
    txBody.innerHTML = tx.map(r => `
      <tr>
        <td>${r.id}</td>
        <td>${r.type === "Transfer Out" ? "Self" : r.other_party}</td>
        <td>${r.other_party}</td>
        <td>â‚¦${r.amount}</td>
        <td>Success</td>
        <td>${r.date}</td>
      </tr>
    `).join("");
  } catch (e) {
    console.error("Transactions load error:", e);
  }
}

loadMetrics();
loadRecentTransactions();

// search box placeholder
document.getElementById('searchBox').addEventListener('keypress', (e)=>{
  if(e.key==='Enter') alert('Search not yet integrated with backend.');
});
</script>
</body>
</html>