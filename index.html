<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PayMe Dashboard</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* --- NAVBAR --- */
.navbar { display: flex; justify-content: space-between; align-items: center; background-color: #222; padding: 10px 20px; position: relative; }
.logo { color: #fff; font-size: 20px; font-weight: bold; }
.hamburger { display: none; flex-direction: column; cursor: pointer; gap: 5px; }
.hamburger .line { width: 25px; height: 3px; background-color: white; }
.nav-links { list-style: none; display: flex; gap: 15px; }
.nav-links li a { color: #fff; text-decoration: none; }
.nav-links li { cursor: pointer; }
@media (max-width: 768px){ .hamburger { display: flex; } .nav-links { display: none; flex-direction: column; background-color: #222; width: 100%; position: absolute; top: 60px; left: 0; padding: 10px 0; } .nav-links.active { display: flex; } }

/* --- BODY --- */
body { font-family: Arial, sans-serif; margin: 0; background: #f7f7f7; }

/* Header */
.header { background: white; padding: 15px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #ddd; }
.header h2 { margin: 0; font-size: 16px; }
.header small { color: gray; }

/* Balance Card */
.balance-card { background: #ecebff; margin: 15px; padding: 20px; border-radius: 12px; }
.balance-card h3 { margin: 0; color: #333; }
.balance-card button { background: #5b4dff; color: white; border: none; padding: 10px 15px; border-radius: 6px; margin-top: 10px; cursor: pointer; }

/* Quick Actions */
.quick-actions { display: flex; justify-content: space-around; margin: 20px 10px; }
.quick-actions button { text-align: center; background: none; border: none; cursor: pointer; font-size: 14px; }
.quick-actions i { font-size: 24px; color: purple; }

/* Services Grid */
.services { background: white; padding: 20px; border-radius: 12px; margin: 10px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; }
.services button { text-align: center; background: none; border: none; cursor: pointer; font-size: 14px; }
.services i { font-size: 20px; color: purple; }

/* Bottom Nav */
.bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 10px 0; border-top: 1px solid #ddd; }
.bottom-nav button { text-align: center; background: none; border: none; cursor: pointer; font-size: 14px; color: gray; }
.bottom-nav i { display: block; font-size: 20px; margin-bottom: 5px; color: purple; }

/* Profile Modal */
#profileModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; }
#profileModal .modal-content { background: white; padding: 20px; border-radius: 10px; width: 90%; max-width: 400px; }
#profileModal h2 { margin-top: 0; }
</style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
  <div class="logo">PAYME</div>
  <div class="hamburger" id="hamburger">
    <span class="line"></span>
    <span class="line"></span>
    <span class="line"></span>
  </div>
  <ul class="nav-links" id="nav-links">
    <li id="profileLink">Profile</li>
    <li id="walletLink">Wallet</li>
    <li id="settingsLink">Settings</li>
    <li id="logout">Logout</li>
  </ul>
</nav>

<!-- Header -->
<div class="header">
  <div>
    <h2>Hi, USER ðŸ‘‹</h2>
    <small>Welcome, letâ€™s make payments!</small>
  </div>
</div>

<!-- Balance Card -->
<div class="balance-card">
  <h3>Available Balance</h3>
  <h1>â‚¦0.00</h1>
  <button id="addMoney">Add Money</button>
</div>

<!-- Quick Actions -->
<div class="quick-actions">
  <button id="toBank"><i class="fas fa-university"></i><br>To Bank</button>
  <button id="toWallet"><i class="fas fa-wallet"></i><br>To Wallet</button>
  <button id="atmcard"><i class="fas fa-credit-card"></i><br>ATM Card</button>
</div>

<!-- Services -->
<div class="services">
  <button id="airtime"><i class="fas fa-phone"></i><br>Airtime</button>
  <button id="data"><i class="fas fa-wifi"></i><br>Data</button>
  <button id="electric"><i class="fas fa-bolt"></i><br>Electricity</button>
  <button id="betting"><i class="fas fa-futbol"></i><br>Betting</button>
  <button id="tv"><i class="fas fa-tv"></i><br>TV</button>
  <button id="loan"><i class="fas fa-hand-holding-usd"></i><br>Loan</button>
  <button id="business"><i class="fas fa-briefcase"></i><br>Business</button>
  <button id="earn"><i class="fas fa-users"></i><br>Refer & Earn</button>
</div>

<!-- Bottom Nav -->
<div class="bottom-nav">
  <button id="home"><i class="fas fa-home"></i>Home</button>
  <button id="loanBottom"><i class="fas fa-credit-card"></i>Loan</button>
  <button id="wealth"><i class="fas fa-chart-line"></i>Wealth</button>
  <button id="reward"><i class="fas fa-gift"></i>Reward</button>
</div>

<!-- Profile Modal -->
<div id="profileModal">
  <div class="modal-content">
    <h2>My Profile</h2>
    <p><b>Username:</b> <span id="profileUsername"></span></p>
    <p><b>Email:</b> <span id="profileEmail"></span></p>
    <p><b>Phone:</b> <span id="profilePhone"></span></p>
    <p><b>Account No:</b> <span id="profileAccount"></span></p>
    <p><b>Balance:</b> â‚¦<span id="profileBalance"></span></p>
    <button onclick="document.getElementById('profileModal').style.display='none'">Close</button>
  </div>
</div>

<script>
// Hamburger toggle
const hamburger = document.getElementById('hamburger');
const navLinks = document.getElementById('nav-links');
hamburger.addEventListener('click', () => { navLinks.classList.toggle('active'); });

// --- Check login and update dashboard ---
let user = JSON.parse(localStorage.getItem('user'));
if(!user){ window.location.href = 'paymelogin.html'; }
else{
  document.querySelector('.header h2').innerText = `Hi, ${user.username} ðŸ‘‹`;
  document.querySelector('.balance-card h1').innerText = `â‚¦${user.balance}`;
}

// --- Refresh balance from backend ---
async function refreshBalance(){
  if(!user) return;
  try{
    const res = await fetch(`https://payme-pvwh.onrender.com/user/${user.id}`);
    if(res.ok){
      const data = await res.json();
      user.balance = data.balance;
      localStorage.setItem('user', JSON.stringify(user));
      document.querySelector('.balance-card h1').innerText = `â‚¦${user.balance}`;
    }
  } catch(err){ console.error(err); }
}
refreshBalance();
window.addEventListener('focus', refreshBalance);

// --- Logout ---
document.getElementById('logout').addEventListener('click', () => {
  localStorage.removeItem('user');
  window.location.href = 'paymelogin.html';
});

// --- Profile Modal ---
document.getElementById('profileLink').addEventListener('click', () => {
  document.getElementById('profileUsername').innerText = user.username;
  document.getElementById('profileEmail').innerText = user.email;
  document.getElementById('profilePhone').innerText = user.phone;
  document.getElementById('profileAccount').innerText = user.accountNumber;
  document.getElementById('profileBalance').innerText = user.balance;
  document.getElementById('profileModal').style.display = 'flex';
});

// --- Add Money ---
document.getElementById('addMoney').addEventListener('click', async () => {
  const amount = parseFloat(prompt("Enter amount to add:"));
  if(!isNaN(amount)){
    const res = await fetch('https://payme-pvwh.onrender.com/update-balance', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({ userId: user.id, amount })
    });
    const data = await res.json();
    if(res.ok){
      user.balance = data.balance;
      localStorage.setItem('user', JSON.stringify(user));
      document.querySelector('.balance-card h1').innerText = `â‚¦${user.balance}`;
    }
    alert(data.message);
  }
});

// --- To Bank ---
document.getElementById('toBank').addEventListener('click', () => {
  window.location.href='toBank.html';
});

// Other features (ATM, airtime, etc.) remain untouched
</script>
</body>
</html>
