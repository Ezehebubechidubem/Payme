<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Transfer to Bank</title>
<style>
body { font-family: Arial, sans-serif; background: #f7f7f7; margin:0; padding:20px; }
.container { max-width: 400px; margin: auto; background:white; padding:20px; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.2); }
input, select { width:100%; padding:10px; margin:10px 0; border-radius:6px; border:1px solid #ccc; }
button { width:100%; padding:12px; background:#5b4dff; color:white; border:none; border-radius:6px; cursor:pointer; }
button:hover{ background:#4332e0; }
</style>
</head>
<body>
<div class="container">
  <h2>Transfer to Bank</h2>
  <input type="text" id="bankName" placeholder="Bank Name">
  <input type="text" id="accountNumber" placeholder="Account Number">
  <input type="number" id="amount" placeholder="Amount">
  <button onclick="transferToBank()">Send</button>
</div>

<script>
async function transferToBank(){
  const userId = localStorage.getItem('userId');
  if(!userId){ alert("Login required"); window.location.href="paymelogin.html"; return; }

  const bankName = document.getElementById('bankName').value.trim();
  const accountNumber = document.getElementById('accountNumber').value.trim();
  const amount = parseFloat(document.getElementById('amount').value);

  if(!bankName || !accountNumber || isNaN(amount)){ return alert("All fields are required"); }

  try{
    const res = await fetch("https://payme-pvwh.onrender.com/transfer-bank", {
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify({ userId, bankName, accountNumber, amount })
    });
    const data = await res.json();
    alert(data.message);
    if(res.ok){ window.location.href="index.html"; }
  }catch(err){ console.error(err); alert("Error sending money"); }
}
</script>
</body>
</html>
